<body class="top-navigation">
    <div id="wrapper">
      <div id="page-wrapper" class="gray-bg">


        <div class="wrapper wrapper-content">
          <div class="container">
            <div class="row">
              <div class="col-lg-8 col-lg-offset-2">
                <div class="ibox float-e-margins">
                  <!-- Header du formulaire avec outils -->
                  <div class="ibox-title">
                    <h5>Annonce de perte d'objet <small>Veuillez compléter les informations ci-dessous</small></h5><br>
                    <div class="ibox-tools">
                      <span class="text-danger">{{ errorMessage }}</span>
                      <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                      </a>
                      <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                      </a>
                      <ul class="dropdown-menu dropdown-user">
                        <li><a href="#">Config option 1</a></li>
                        <li><a href="#">Config option 2</a></li>
                      </ul>
                      <a class="close-link">
                        <i class="fa fa-times"></i>
                      </a>
                    </div>
                  </div>

                  <!-- Contenu du formulaire -->
                  <div class="ibox-content">
                    <form #myForm="ngForm" role="form" method="POST" (ngSubmit)="addAnnonce()" enctype="multipart/form-data" novalidate>
                      <div class="form-group">
                        <label for="objectName">Nom de l'objet</label>
                        <input type="text" id="objectName" class="form-control" name="titre" [(ngModel)]="annonce.titre" placeholder="Exemple : Sac à dos, téléphone, clé..." required>
                        <div class="text-danger" c *ngIf="myForm.submitted && !myForm.controls['titre']?.valid">
                          Veuillez renseigner ce champ
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" class="form-control" rows="3" name="description" [(ngModel)]="annonce.description" placeholder="Décrivez l'objet en détail..." required></textarea>
                        <div class="text-danger" c *ngIf="myForm.submitted && !myForm.controls['description']?.valid">
                          Veuillez renseigner ce champ
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="location">Lieu de perte</label>
                        <input type="text" id="location" class="form-control" name="lieu" [(ngModel)]="annonce.lieu" placeholder="Exemple : Gare du Nord, Parc Monceau..." required>
                        <div class="text-danger" c *ngIf="myForm.submitted && !myForm.controls['lieu']?.valid">
                          Veuillez renseigner ce champ
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="date">Date de perte</label>
                        <input type="date" id="date" class="form-control" name="date" [(ngModel)]="annonce.date" required>
                        <div class="text-danger" c *ngIf="myForm.submitted && !myForm.controls['date']?.valid">
                          Veuillez renseigner ce champ
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="contact">Contact</label>
                        <input type="text" id="contact" class="form-control"  name="contact" [(ngModel)]="annonce.contact" placeholder="Votre numéro de téléphone ou email" required>
                        <div class="text-danger" c *ngIf="myForm.submitted && !myForm.controls['contact']?.valid">
                          Veuillez renseigner ce champ
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="image">Ajouter une image (facultatif)</label>
                        <input type="file" id="image" class="form-control"  name="image" [(ngModel)]="annonce.image" (change)="onFileSelected($event)">
                        <div *ngIf="previewUrl">
                          <h3>Aperçu de l'image:</h3>
                          <img [src]="previewUrl" alt="Preview" width="300">
                        </div>
                      </div>

                      <button type="submit" class="btn btn-primary" >{{ editMode ? "Mettre à jour" : "Publier" }}</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        
      </div>
    </div>

  </body>
